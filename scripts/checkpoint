#!/data/data/com.termux/files/usr/bin/bash
cd ~/termux-ai-workspace 2>/dev/null || { echo "Repo not found"; exit 1; }

STEP="$1"
[[ -z "$STEP" ]] && STEP="Progress update"

# Update ROADMAP checkboxes automatically
sed -i "s/\[ \] $STEP/[âœ“] $STEP/" ROADMAP.md 2>/dev/null

# Append to changelog
echo "- $(date "+%Y-%m-%d %H:%M"): $STEP" >> CHANGELOG.md

# Commit and push
git add .
git commit -m "$STEP" -m "Auto-checkpoint: $(date)"
git push origin main

termux-notification -t "Checkpoint" -c "$STEP committed"
