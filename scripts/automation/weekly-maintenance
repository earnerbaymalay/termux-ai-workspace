#!/data/data/com.termux/files/usr/bin/bash
termux-notification -t "Weekly Maintenance" -c "Starting full system check..."

# Update all packages
pkg update && pkg upgrade -y
pip install --upgrade pip
pip list --outdated --format=freeze | cut -d = -f 1 | xargs -n1 pip install -U

# Update Ollama models
ollama pull llama3.2:3b

# Run full health check
~/ai/scripts/tests/health-monitor
~/ai/scripts/tests/verify-setup

# Backup configs
tar -czf ~/ai/outputs/backups/config-$(date "+%Y%m%d").tar.gz \
  ~/.bashrc ~/.shortcuts ~/ai/scripts ~/vault/System-Rules 2>/dev/null

termux-notification -t "Maintenance Complete" -c "All systems updated"
